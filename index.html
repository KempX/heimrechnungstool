<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Heimrechnungstool">
		<meta name="author" content="fLIPS">
		<title>Heimrechnungstool</title>
		<!-- Bootstrap core CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
		<link rel="stylesheet" href="style.css">
	</head>
	<body class="text-center">
		<main class="form-qrrechnung">
			<img src="logo.png" alt="Logo" style="width: 570px;" class="mb-5">
			<form>
				<div class="form-floating mb-2">
					<select class="form-select" id="format">
						<option selected value="no">Papier-Rechnung (Ausdruck auf perforiertes Papier)</option>
						<option value="yes">PDF-Rechung (elektronischer Versand)</option>
					</select>
					<label for="heim">Format</label>
				</div>
				<div class="form-floating mb-2">
					<select class="form-select" id="heim">
						<option selected value="Bern">Bern</option>
						<option value="Bremgarten">Bremgarten</option>
						<option value="Ostermundigen">Ostermundigen</option>
						<option value="Kehrsatz">Kehrsatz</option>
					</select>
					<label for="heim">Heim</label>
				</div>
				<div class="form-floating mb-2">
					<input class="form-control" type="text" id="mieter" placeholder="Mieter">
					<label for="mieter">Mieter</label>
				</div>
				<div class="form-floating mb-2">
					<input class="form-control" type="text" id="datum" placeholder="Mietdatum">
					<label for="datum">Mietdatum</label>
				</div>
				<div class="form-floating mb-4">
					<input class="form-control" type="text" id="betrag" placeholder="Mietbetrag">
					<label for="betrag">Mietbetrag</label>
				</div>
				<button class=" btn btn-lg btn-primary m-2" type="submit" onclick="processFormData(true); return false;">SVG herunterladen</button>
				<button class=" btn btn-lg btn-primary m-2" type="submit" onclick="processFormData(false); return false;">Rechnung bearbeiten</button>
			</form>
		</main>
		<footer class="footer">
			<div class="container">
				<span class="text-muted">2021 <a href="https://schwyzerstaern.ch/users/flips" target="_blank" class="text-reset">fLIPS</a></span>
			</div>
		</footer>
	</body>
	<script language="javascript" type="text/javascript">
		function processFormData(downloadsvg){
			let heim = document.getElementById('heim').value;
			let mieter = document.getElementById('mieter').value;
			let datum = document.getElementById('datum').value;
			let betrag = document.getElementById('betrag').value;
			let format = document.getElementById('format').value;
			let url = 'https://qr-rechnung.net/#/b,de,SPC,0200,1,CH1409000000300055426,S,Verein%20Pfadfinderheime%20Schwyzerst%C3%A4rn,,,3000,Bern,CH,,,,,,,,' 
					+ betrag.replace(/\s/g, '') + ',CHF,,,,,,,,NON,,Heim%20'
					+ encodeURIComponent(heim) + '%20%2F%20'
					+ encodeURIComponent(mieter) + '%20%2F%20'
					+ encodeURIComponent(datum) + ',EPD,?cutlines='
					+ format;
			if(downloadsvg){
				url += '&op=downloadsvg';
			}
			window.open(url,'_blank');
		}
	</script>
</html>